â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ğŸ“ ACADEMIC EXCHANGE â€” PROJECT REFERENCE GUIDE            â•‘
â•‘              Last Updated: 2026-02-20  (Claude Session Log)         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  WHAT IS THIS PROJECT?
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  A student-to-student marketplace web app (like OLX for college students).
  Students can sell/buy academic resources: books, notes, gadgets, etc.

  Tech Stack:
    Backend  â†’ Node.js + Express.js (REST API + Socket.io)
    Database â†’ PostgreSQL on Supabase (cloud)
    Storage  â†’ Supabase Storage (for listing images + user avatars)
    Frontend â†’ Vanilla JS SPA (Single Page App), no framework
    Auth     â†’ JWT (JSON Web Tokens) + bcrypt password hashing
    Maps     â†’ Leaflet.js (OpenStreetMap) for location filter
    Payment  â†’ Razorpay integration (key needs replacing)

  Deployed at:
    Frontend â†’ Vercel  â†’ https://academicexchange.24102002.xyz
    Backend  â†’ Render  â†’ (Render auto-deploys from GitHub main branch)
    GitHub   â†’ https://github.com/Vamsi-1009/Seniour2Juniour

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  PROJECT FOLDER STRUCTURE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  academic-exchange/
  â”œâ”€â”€ QUICK_START.txt             â† THIS FILE (update after every session)
  â”œâ”€â”€ backend/
  â”‚   â”œâ”€â”€ server.js               â† Entry point, Express + Socket.io setup
  â”‚   â”œâ”€â”€ .env                    â† DB URL, JWT secret, Supabase keys
  â”‚   â”œâ”€â”€ config/
  â”‚   â”‚   â””â”€â”€ db.js               â† PostgreSQL pool (connects to Supabase)
  â”‚   â”œâ”€â”€ middleware/
  â”‚   â”‚   â”œâ”€â”€ auth.js             â† JWT verify middleware (authenticateToken)
  â”‚   â”‚   â””â”€â”€ rateLimiter.js      â† 100 req/15min via express-rate-limit
  â”‚   â””â”€â”€ routes/
  â”‚       â”œâ”€â”€ auth.js             â† POST /api/auth/login, /api/auth/register
  â”‚       â”œâ”€â”€ listings.js         â† CRUD for listings + PUT edit + PATCH status
  â”‚       â”œâ”€â”€ messages.js         â† Chat messages, GET /my-chats (unread count)
  â”‚       â”œâ”€â”€ user.js             â† Profile GET/PUT, avatar upload, public user
  â”‚       â”œâ”€â”€ wishlist.js         â† GET wishlist (full listing data), POST toggle
  â”‚       â””â”€â”€ transactions.js     â† Payment record (Razorpay)
  â””â”€â”€ frontend/
      â”œâ”€â”€ index.html              â† Single HTML page, all modals defined here
      â”œâ”€â”€ css/
      â”‚   â””â”€â”€ styles.css          â† CLAYMORPHISM theme (Nunito, pastel+purple)
      â””â”€â”€ js/
          â”œâ”€â”€ config.js           â† Sets window.ENV_API_URL for Vercel deploy
          â””â”€â”€ main.js             â† ALL frontend logic (1700+ lines, single file)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  DATABASE TABLES (PostgreSQL on Supabase)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  users         â†’ user_id, name, email, password_hash, role, avatar,
                  location, bio, created_at
  listings      â†’ listing_id, user_id, title, description, price,
                  category, condition, images[], location, latitude,
                  longitude, status ('active'|'sold'), views, created_at
  messages      â†’ message_id, listing_id, sender_id, receiver_id,
                  content, created_at  [JOIN users for sender_name]
  wishlist      â†’ user_id, listing_id, created_at
  recently_viewed â†’ user_id, listing_id, viewed_at
  reports       â†’ report_id, reporter_id, listing_id, reason

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  KEY API ENDPOINTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Auth:
    POST   /api/auth/register       â†’ { name, email, password }
    POST   /api/auth/login          â†’ { email, password } â†’ JWT token

  Listings:
    GET    /api/listings            â†’ All listings (with filters)
    GET    /api/listings/:id        â†’ Single listing detail
    POST   /api/listings            â†’ Create listing (multipart/form-data)
    PUT    /api/listings/:id        â†’ Edit listing (title/desc/price/cond/loc)
    PATCH  /api/listings/:id/status â†’ Mark sold/active { status:'sold'|'active' }
    DELETE /api/listings/:id        â†’ Delete listing
    GET    /api/listings/my-items   â†’ Current user's listings

  User:
    GET    /api/user/profile        â†’ Own profile + listings (auth required)
    PUT    /api/user/profile        â†’ Update name, email, location, bio
    POST   /api/user/avatar         â†’ Upload avatar image (multipart)
    PUT    /api/user/change-password â†’ { currentPassword, newPassword }
    GET    /api/user/public/:userId â†’ Public name + avatar (for chat header)

  Messages:
    GET    /api/messages/:listingId â†’ Chat history for a listing
    GET    /api/messages/my-chats   â†’ All chats for current user
                                      (returns other_user_name, other_user_avatar,
                                       last_message, listing_title, unread_count)

  Wishlist:
    GET    /api/wishlist            â†’ All saved listings (full listing rows +
                                      seller_name + added_at), ordered by newest
    POST   /api/wishlist/:listingId â†’ Toggle: adds if not saved, removes if saved
                                      Returns { action: 'added' | 'removed' }

  Socket.io events:
    Emit:  join_chat      { listingId, userId }
    Emit:  send_message   { listingId, senderId, receiverId, message }
    Emit:  typing         { room, userId }
    Emit:  stopped_typing { room }
    On:    new_message    â†’ displayMessage(message)
    On:    user_typing    â†’ showTypingIndicator()
    On:    user_stopped_typing â†’ hideTypingIndicator()

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  FRONTEND â€” KEY JS FUNCTIONS (main.js)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Auth / Nav:
    checkAuth()           â†’ Reads JWT from localStorage, calls updateNav()
    updateNav()           â†’ Injects nav: Sell | â¤ï¸ Saved | ğŸ’¬ Chats | Avatar
                            Also calls loadWishlistIds() + updateUnreadBadge()
    loadNavAvatar()       â†’ Fetches /user/profile, shows avatar in nav
    handleLogin(e)        â†’ POST /auth/login â†’ store token â†’ reload
    handleRegister(e)     â†’ POST /auth/register â†’ store token â†’ reload
    logout()              â†’ Clears token, reloads
    toggleProfileDropdown(event) â†’ Toggles .open on #profileDropdown
    toggleMobileMenu()    â†’ Hamburger: toggles .mobile-open on #navMenu
                            + .active on #hamburgerBtn. Auto-closes on outside click.

  Modal control:
    showModal(id)         â†’ Adds .active class to modal div
    closeModal(id)        â†’ Removes .active class
    âš ï¸  IMPORTANT: Always use .active (NOT .show) for modals

  Alerts / Toasts:
    showAlert(msg, type)  â†’ Creates .alert div inside #alertContainer
                            type = 'success' | 'error' | 'info'
    showConfirm(msg, onConfirm, label) â†’ Custom confirm modal (replaces
                            window.confirm). Creates #confirmModal dynamically.
    âš ï¸  IMPORTANT: class is .alert (NOT .alert-notification)

  Listings:
    loadListings(filters) â†’ GET /listings (supports location/range filters)
    renderListings(arr)   â†’ Renders .listing-card in #listingsGrid
                            Includes â¤ï¸ heart button + SOLD overlay
    renderMyItems(arr)    â†’ Renders cards in #myItemsGrid
                            Includes Edit | âœ… Sold/ğŸ”„ Relist | Delete buttons
    viewListing(id)       â†’ Creates dynamic modal id="listingDetailModal"
    loadMyItems()         â†’ GET /listings/my-items â†’ renderMyItems()
    editListing(id)       â†’ Fetches listing, shows pre-filled edit modal
    handleEditListing(e,id) â†’ PUT /listings/:id with updated fields
    markAsSold(id, status) â†’ PATCH /listings/:id/status (toggles sold/active)
                             Uses showConfirm() for confirmation
    deleteListing(id)     â†’ Uses showConfirm(), then DELETE /listings/:id
    handleSell(e)         â†’ POST /listings (FormData with images)

  Wishlist:
    loadWishlistIds()     â†’ GET /wishlist â†’ populates myWishlist (Set of IDs)
                            Called automatically after login via updateNav()
    toggleWishlist(e, id) â†’ POST /wishlist/:id, updates heart button state
    openWishlist()        â†’ Shows #wishlistModal, fetches + renders saved items
    renderWishlistPanel(items) â†’ Renders .wishlist-item rows in #wishlistList
    toggleAndRefreshWishlist(e,id) â†’ Toggle heart then reload the wishlist panel

    Global: let myWishlist = new Set()  â† Set of saved listing_id strings

  Unread Badge:
    updateUnreadBadge()   â†’ GET /messages/my-chats, counts chats with
                            unread_count > 0, updates #chatsBadge span
                            Auto-called every 30s via setInterval

  Sell form (multi-step):
    nextStep(n) / prevStep(n) â†’ show/hide .form-step divs
    selectCategory(cat, el)   â†’ sets hidden input + .selected on category card
    validateStep(n)           â†’ validates before next step
    initSellMap()             â†’ Leaflet map in step 3

  Profile:
    showProfile()             â†’ GET /user/profile â†’ renderProfileView()
    renderProfileView(u, l)   â†’ Shows avatar, details, listings
    renderProfileEdit(u)      â†’ Shows edit form
    handleAvatarChange(input) â†’ Preview file, store in pendingAvatarFile
    handleUpdateProfile(e)    â†’ PUT /user/profile + POST /user/avatar

  Chat:
    openChat(listingId, sellerId) â†’ Joins socket room, shows chatModal,
                                    fetches seller info for chat header
    loadChatHistory(id)     â†’ GET /messages/:id â†’ displayMessage() each
    sendMessage()           â†’ socket.emit('send_message', ...)
    displayMessage(msg)     â†’ Creates .chat-message-wrapper.sent/.received
    openChatsPanel()        â†’ showModal('chatsPanelModal') + loadAllChats()
    loadAllChats()          â†’ GET /messages/my-chats
    renderChatsList(chats)  â†’ Renders .chat-item rows with name/avatar/unread
    openChatFromList(lid,sid) â†’ closeModal panel, openChat()

  Filters / Map:
    filterCategory(cat, el)    â†’ loadListings({ category })
    toggleAdvancedFilters()    â†’ show/hide #advancedFilters panel
    applyAdvancedFilters()     â†’ loadListings with all filter values
    setupSearch()              â†’ Live filter on searchInput
    showMapFilter()            â†’ Open map modal (Leaflet)
    applyMapFilter()           â†’ loadListings with lat/lng/range

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  CSS DESIGN SYSTEM â€” CLAYMORPHISM THEME
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Font        â†’ Nunito (Google Fonts), weights 400-900
  Background  â†’ #f0f4ff with dot-grid pattern (radial-gradient)
  Primary     â†’ --p1: #7c3aed (purple), --p2: #a78bfa (light purple)
  Text        â†’ --text: #2d1b69 | --text-2: #6b5fa6 | --text-3: #9d94c4
  Shadows     â†’ Flat offset shadows (NO blur): 4px 4px 0 #color
  Borders     â†’ 2.5px solid rgba(124,58,237,0.18) rounded corners

  CSS Variables:
    --r-sm: 12px  --r: 20px  --r-lg: 28px  --r-xl: 36px  --r-full: 999px
    --shadow-clay: 4px 4px 0 rgba(124,58,237,0.25)
    --shadow-clay-lg / --shadow-clay-xl â†’ same, bigger offset
    --inset: inset 0 2px 0 rgba(255,255,255,0.7)  â† top highlight

  Key CSS Classes â€” Cards:
    .listing-card          â†’ Main product card (hover: lift + tilt)
    .card-image-container  â†’ Image area, position:relative (200px height)
    .card-no-image         â†’ Emoji placeholder when no image
    .card-condition        â†’ Absolute badge top-right of card image
    .card-category         â†’ Purple pill tag
    .card-footer           â†’ Price + location row
    .card-actions          â†’ Edit/Delete/Sold button row (My Items)
    .card-btn              â†’ Small pill button inside card
    .card-btn.danger       â†’ Red variant
    .wish-btn              â†’ â¤ï¸ Heart button absolute top-left of card image
    .wish-btn.active       â†’ Pink background (item is saved)
    .sold-overlay          â†’ Semi-transparent overlay on sold cards
    .sold-tag              â†’ Red diagonal "SOLD" badge inside overlay

  Key CSS Classes â€” Buttons:
    .btn                   â†’ Base button (pill, clay shadow)
    .btn-primary           â†’ Purple gradient, white text
    .btn-secondary         â†’ Light grey
    .btn-danger            â†’ Red outline â†’ solid red on hover
    .btn-block             â†’ width: 100%
    .btn-sm                â†’ Smaller padding

  Key CSS Classes â€” Modals:
    .modal                 â†’ Fixed overlay (default hidden)
    .modal.active          â†’ display:flex  â† USE .active NOT .show
    .modal-content         â†’ White box, border-radius var(--r-xl)
    .modal-header          â†’ Header with close btn
    .modal-header-sub      â†’ Subtitle text below h2
    âš ï¸  On mobile (â‰¤768px): modals become bottom sheets
        (align-items:flex-end, rounded top only)

  Key CSS Classes â€” Wishlist Panel:
    .wishlist-item         â†’ Row in wishlist panel (flex, hover bg)
    .wishlist-thumb        â†’ 62Ã—62 rounded image thumbnail
    .wishlist-thumb-placeholder â†’ Purple gradient fallback
    .wishlist-item-title   â†’ Bold truncated title
    .wishlist-item-sub     â†’ Price Â· Category Â· Seller (small text)
    .wishlist-status       â†’ .sold (red) | .available (green)

  Key CSS Classes â€” Nav:
    .navbar                â†’ Sticky, blur backdrop, clay border
    .logo                  â†’ Purple, font-weight:900
    .nav-menu              â†’ Flex row of nav buttons
    .nav-btn               â†’ Base pill nav button
    .nav-action-btn        â†’ Sell / Chats / Saved action pill
    .nav-profile-btn       â†’ Round avatar button
    .nav-badge             â†’ Red unread count bubble (absolute, top-right)
    .hamburger-btn         â†’ 3-line icon (mobile only, display:none on desktop)
    .hamburger-btn.active  â†’ Animated X shape
    .nav-menu.mobile-open  â†’ Shown as dropdown on mobile
    .profile-dropdown      â†’ Dropdown menu (.open = visible)

  Key CSS Classes â€” Chat:
    .chat-modal-content    â†’ Flex column, fixed height chat window
    .chat-header-bar       â†’ Purple gradient header
    .chat-messages         â†’ Scrollable message area
    .chat-message-wrapper  â†’ .sent or .received (aligns left/right)
    .chat-message          â†’ Actual bubble (.sent=purple, .received=white)
    .message-sender-name   â†’ Small name above bubble
    .chat-input-area       â†’ Bottom input row
    .chat-item             â†’ Row in chats list panel
    .chat-item-avatar      â†’ Round avatar in chat list
    .chat-unread-badge     â†’ Purple pill count on chat list rows

  Key CSS Classes â€” Custom Confirm:
    .confirm-modal         â†’ Centered white card (max 360px)
    .confirm-icon          â†’ Large emoji icon area
    .confirm-message       â†’ Message text
    .confirm-actions       â†’ Cancel + danger button row

  Responsive Breakpoints:
    1024px â†’ Tablet: wider card columns, adjusted hero
    768px  â†’ Mobile: hamburger nav, bottom-sheet modals, 2-col card grid,
              horizontal-scroll filters, full-width alerts
    480px  â†’ Small mobile: .card-description hidden, .step-label hidden,
              smaller fonts and gaps
    360px  â†’ Tiny mobile: extra compact adjustments

  Key CSS Classes â€” Alerts:
    .alert-container       â†’ Fixed bottom-right toast container
    .alert                 â†’ Toast card (border-left colored)
    .alert.success         â†’ Green left border
    .alert.error           â†’ Red left border
    .alert.info            â†’ Blue/purple left border

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  FULL HISTORY OF CHANGES (Chronological)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  â”€â”€ Phase 1: Initial Setup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… Full backend: Express, JWT auth, PostgreSQL (Supabase), Socket.io
  âœ… Listings CRUD with Supabase Storage image upload
  âœ… Real-time chat with Socket.io rooms (per listing)
  âœ… Frontend: Vanilla JS SPA, single index.html
  âœ… Deployed: Backend â†’ Render, Frontend â†’ Vercel
  âœ… Custom domain: academicexchange.24102002.xyz

  â”€â”€ Phase 2: Feature Additions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… Navbar: "Sell Item" and "Chats" buttons outside profile dropdown
  âœ… Chat header: shows seller name + avatar (/user/public/:userId)
  âœ… Profile modal: full editable (name, email, location, bio, avatar)
  âœ… Backend: PUT /user/profile accepts email field
  âœ… Backend: GET /user/public/:userId added

  â”€â”€ Phase 3: Chat Bug Fixes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… displayMessage() shows "You" (sent) or sender_name (received)
  âœ… My Chats list: uses other_user_name + other_user_avatar correctly
  âœ… My Chats: backend Promise.all subquery always returns the OTHER
     user's name (not the current user's own name)

  â”€â”€ Phase 4: UI Overhaul (4 iterations) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… Iteration 1: Dark space theme â†’ rejected by user
  âœ… Iteration 2: Simpler dark â†’ rejected
  âœ… Iteration 3: Clean light theme (Inter, indigo) â†’ committed
  âœ… Iteration 4 (CURRENT): CLAYMORPHISM THEME
     Nunito font, pastel purple, chunky flat shadows, dot-grid bg,
     heavy rounded corners, pastel blob glows in hero

  â”€â”€ Phase 5: JS / CSS Class Mismatch Fix â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… After claymorphism rewrite, ALL old JS class names fixed:
     .show â†’ .active (modals)  |  .show â†’ .open (dropdown)
     .profile-btn â†’ .nav-profile-btn
     .alert-notification â†’ .alert + #alertContainer
     .card â†’ .listing-card  |  .card-image â†’ .card-image-container
     renderChatsList: .chat-list-item â†’ .chat-item etc.

  â”€â”€ Phase 6: Small UI Polish â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… Primary buttons: gradient + hover lift + press-down effect
  âœ… .btn-danger: red outline â†’ solid red on hover
  âœ… Login/Register modals: pastel gradient header banner + icon inputs
  âœ… Form inputs: hover border glow, brighter focus shadow

  â”€â”€ Phase 7: Responsive Design + New Features â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… Hamburger menu for mobile (â‰¤768px), animated X on open
  âœ… Bottom-sheet modals on mobile (align-items:flex-end, rounded top)
  âœ… Horizontal-scroll filter bar on mobile
  âœ… 2-col card grid on tablet, responsive to 1-col on small mobile
  âœ… .card-description hidden on â‰¤480px to save space
  âœ… Wishlist â¤ï¸ heart button on every listing card
     - myWishlist = Set of saved listing_id strings (global)
     - loadWishlistIds() called on login
     - toggleWishlist() POSTs to /wishlist/:id, updates button
  âœ… â¤ï¸ Saved nav button â†’ opens Wishlist panel modal
     - Displays all saved items: thumbnail, price, category, seller, status
     - Heart button inside panel to remove from wishlist + refresh
  âœ… SOLD overlay badge on sold listings (both Browse and My Items)
  âœ… Edit listing modal (pre-filled with current data)
     - Backend: PUT /api/listings/:id (new endpoint)
  âœ… Mark as Sold / Relist toggle button on My Items cards
     - Backend: PATCH /api/listings/:id/status (new endpoint)
  âœ… Custom confirm modal replacing window.confirm() (showConfirm())
  âœ… Unread chat badge on nav ğŸ’¬ Chats button (red dot with count)
     - updateUnreadBadge() auto-refreshes every 30 seconds
  âœ… Rate limiting: 100 req/15 min (already existed via rateLimiter.js)
  âœ… Skeleton loading card styles added to CSS (.skeleton-card etc.)
  âœ… nav-badge CSS for red bubble counter on nav buttons

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  KNOWN ISSUES / WATCH OUT FOR
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  âš ï¸  Modal class = .active (NOT .show) â€” always use showModal()/closeModal()
  âš ï¸  Alert class = .alert inside #alertContainer (NOT .alert-notification)
  âš ï¸  Profile dropdown = .open (NOT .show)
  âš ï¸  Card class = .listing-card (NOT .card)
  âš ï¸  Razorpay key is placeholder ('YOUR_RAZORPAY_KEY') â€” needs real key
  âš ï¸  myWishlist is a Set of STRING IDs â€” always cast with String(id)
  âš ï¸  toggleWishlist() calls e.stopPropagation() â€” prevents card click
  âš ï¸  Socket.io "send_message": receiverId is currentSellerId which may
      be null if current user IS the seller viewing their own chat
  âš ï¸  Backend GET /my-chats uses Promise.all post-processing (not pure SQL)
      â€” works but slower with many chats
  âš ï¸  Supabase Storage bucket name for avatars must match user.js
  âš ï¸  Render backend free tier sleeps after inactivity â€” first request slow

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  HOW TO RUN LOCALLY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Backend:
    cd academic-exchange/backend
    npm install
    # Ensure .env has: DATABASE_URL, JWT_SECRET, SUPABASE_URL, SUPABASE_KEY
    npm start              â† runs on http://localhost:5000

  Frontend:
    Open academic-exchange/frontend/index.html in browser
    OR serve with Live Server (VS Code extension)

  To verify backend is running:
    Visit http://localhost:5000/api/listings

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  HOW TO DEPLOY CHANGES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Frontend (Vercel auto-deploys):
    git add frontend/
    git commit -m "your message"
    git push origin main
    â†’ Vercel picks up push and deploys in ~1-2 minutes

  Backend (Render auto-deploys):
    git add backend/
    git commit -m "your message"
    git push origin main
    â†’ Render picks up push and re-deploys automatically

  Working directory for git:
    E:\AI Course\Project\Seniour2Juniour\academic-exchange\

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  CURRENT STATE (as of last session)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  âœ… Claymorphism UI fully applied and working
  âœ… All JS functions aligned to correct CSS class names
  âœ… Login/Register modals polished (gradient header + icon inputs)
  âœ… Buttons: gradient + press effect + hover lift
  âœ… Chat: sender name shown above each bubble
  âœ… My Chats: shows correct other person's name and avatar
  âœ… Profile: view + edit both working (avatar upload too)
  âœ… Sell: 3-step form with image upload + map
  âœ… Real-time chat via Socket.io
  âœ… Hamburger menu for mobile, bottom-sheet modals
  âœ… Wishlist: heart button on every card, toggle save/remove
  âœ… â¤ï¸ Saved nav button â†’ panel showing all saved listings
  âœ… Edit listing: pre-filled modal, PUT /listings/:id
  âœ… Mark as Sold / Relist toggle on My Items
  âœ… Custom confirm modal (no more browser alert)
  âœ… Unread badge on Chats nav button (auto-refreshes 30s)
  âœ… SOLD overlay on sold listings
  âœ… Rate limiting (100 req/15 min) on backend
  âœ… Deployed live on Vercel + Render

  âŒ Razorpay â€” placeholder key, payment flow not live yet
  âŒ Admin dashboard â€” button exists but no route/UI built

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
